<!DOCTYPE html>
    <head>
        <title>获取所在城市</title>
        <meta charset="UTF-8" />
        <script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=xtHEuiIPQtXSwsqwu5sIa9qvsvTVP7zr"></script>
    </head>
    <body>
        <p>
            Hi,guy!Here is your location :<b id="lbLocation"></b>
        </p>
        <p>
            I guess your city is <b id="lbCity"></b>
        </p>
        <div id="x"></div>
        <script type="text/javascript">  
            var geolocation = new BMap.Geolocation();
            geolocation.getCurrentPosition(function(r){
                if(this.getStatus() == BMAP_STATUS_SUCCESS){
                    lbLocation.innerHTML = r.point.lng + ',' + r.point.lat;
                    lbCity.innerHTML = r.address.city;
                }
                else {
                    console.log('failed'+this.getStatus());
                }
            },{enableHighAccuracy: true});
        </script>
       
    </body>
</html>
